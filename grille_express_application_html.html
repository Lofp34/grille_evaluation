<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grille express</title>
  <style>
    :root {
      --bg: #0f172a0a;
      --card: #ffffff;
      --ink: #0b1220;
      --muted: #556070;
      --accent: #2563eb;
      --border: #e6e8ee;
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink); background: #f6f7fb;
    }
    header {
      padding: 28px 20px 8px; max-width: 1200px; margin: 0 auto;
    }
    h1 { font-size: 34px; margin: 0 0 8px; letter-spacing: .2px; }
    .lead { color: var(--muted); max-width: 70ch; }

    .toolbar { display:flex; gap:12px; flex-wrap: wrap; margin-top: 14px; }
    .btn { border: 1px solid var(--border); background: white; padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 600; }
    .btn.primary { background: var(--accent); color: white; border-color: var(--accent); }

    main { max-width: 1200px; margin: 18px auto 40px; padding: 0 20px 20px; }
    .grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 16px; }
    @media (max-width: 820px) { .grid { grid-template-columns: 1fr; } }

    .card { background: var(--card); border: 1px solid var(--border); border-left: 6px solid #dbeafe; border-radius: var(--radius); padding: 14px 16px; box-shadow: 0 1px 0 rgba(0,0,0,.02); }
    .card .row { display:flex; align-items: center; gap: 10px; }
    .card h3 { margin: 0; font-size: 18px; }
    .card p { margin: 6px 0 10px; color: var(--muted); }
    .card textarea { width: 100%; min-height: 68px; resize: vertical; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); font-size: 14px; }

    .score {
      display:grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 16px;
    }
    .panel { background: var(--card); border:1px solid var(--border); border-radius: var(--radius); padding: 16px; }
    .score-value { font-size: 40px; font-weight: 800; letter-spacing: .5px; }
    .muted { color: var(--muted); }
    .panel textarea { width:100%; min-height: 68px; border:1px solid var(--border); border-radius: 10px; padding: 10px 12px; }

    .checkline { display:flex; align-items:center; gap:10px; cursor:pointer; user-select:none; }
    .checkline input { width:22px; height:22px; accent-color: var(--accent); }

    .row label.title { font-weight: 700; cursor: pointer; }

    footer { max-width:1200px; margin: 8px auto 80px; padding: 0 20px; color: var(--muted); }

    @media print {
      .toolbar { display: none; }
      body { background: #fff; }
      .card { break-inside: avoid; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Grille express (à imprimer / QR)</h1>
    <p class="lead">Outil d'évaluation des modules de démonstration. Cochez chaque critère atteint et consignez vos notes sous le descriptif.</p>
    <div class="toolbar">
      <button class="btn" id="btn-reset">Réinitialiser</button>
    </div>
  </header>

  <main>
    <section class="grid" id="cards">
      <!-- 1 -->
      <article class="card" data-key="ouverture">
        <label class="row checkline" for="chk-ouverture"><input type="checkbox" class="crit" id="chk-ouverture" /><span class="title">Ouverture du module</span></label>
        <p>Rappel de l'enjeu client formulé dans ses propres mots</p>
        <textarea placeholder="Notes sur l'ouverture du module…" id="note-ouverture"></textarea>
      </article>

      <!-- 2 -->
      <article class="card" data-key="avantages">
        <label class="row checkline" for="chk-avantages"><input type="checkbox" class="crit" id="chk-avantages" /><span class="title">Avantages explicités</span></label>
        <p>Bénéfices présentés avant la présentation technique</p>
        <textarea placeholder="Notes sur les avantages…" id="note-avantages"></textarea>
      </article>

      <!-- 3 -->
      <article class="card" data-key="demo">
        <label class="row checkline" for="chk-demo"><input type="checkbox" class="crit" id="chk-demo" /><span class="title">Démonstration fluide</span></label>
        <p>Scénario court avec données pertinentes et réalistes</p>
        <textarea placeholder="Notes sur la démo…" id="note-demo"></textarea>
      </article>

      <!-- 4 -->
      <article class="card" data-key="microqa">
        <label class="row checkline" for="chk-microqa"><input type="checkbox" class="crit" id="chk-microqa" /><span class="title">Micro‑Q&A géré</span></label>
        <p>Questions traitées en fin de module avec parking‑lot créé</p>
        <textarea placeholder="Notes sur la gestion des questions…" id="note-microqa"></textarea>
      </article>

      <!-- 5 -->
      <article class="card" data-key="clarte">
        <label class="row checkline" for="chk-clarte"><input type="checkbox" class="crit" id="chk-clarte" /><span class="title">Clarté visuelle</span></label>
        <p>Essentiel montré sans dispersion ni surcharge</p>
        <textarea placeholder="Notes sur la clarté visuelle…" id="note-clarte"></textarea>
      </article>

      <!-- 6 -->
      <article class="card" data-key="lien">
        <label class="row checkline" for="chk-lien"><input type="checkbox" class="crit" id="chk-lien" /><span class="title">Lien explicite</span></label>
        <p>Connexion claire enjeux ↔ fonctionnalités ↔ bénéfices</p>
        <textarea placeholder="Notes sur le lien enjeux↔fonctionnalités↔bénéfices…" id="note-lien"></textarea>
      </article>

      <!-- 7 -->
      <article class="card" data-key="timing">
        <label class="row checkline" for="chk-timing"><input type="checkbox" class="crit" id="chk-timing" /><span class="title">Timing respecté</span></label>
        <p>Module bouclé en 3–5 minutes maximum</p>
        <textarea placeholder="Notes sur le timing…" id="note-timing"></textarea>
      </article>

      <!-- 8 -->
      <article class="card" data-key="next">
        <label class="row checkline" for="chk-next"><input type="checkbox" class="crit" id="chk-next" /><span class="title">Next step évoqué</span></label>
        <p>Transition vers le module suivant ou étape suivante</p>
        <textarea placeholder="Notes sur le next step…" id="note-next"></textarea>
      </article>
    </section>

    <section class="score">
      <div class="panel">
        <div class="muted">Score global</div>
        <div><span class="score-value" id="score">0</span><span class="muted"> / 8</span></div>
      </div>
      <div class="panel">
        <div class="muted">Dernière sauvegarde</div>
        <div id="savedAt">—</div>
      </div>
    </section>

    <section class="score" style="margin-top: 8px;">
      <div class="panel">
        <div class="muted" style="margin-bottom:8px;">Une force observée</div>
        <textarea id="force" placeholder="Notez une force notable observée…"></textarea>
      </div>
      <div class="panel">
        <div class="muted" style="margin-bottom:8px;">Un axe d'amélioration</div>
        <textarea id="axe" placeholder="Notez un axe d'amélioration prioritaire…"></textarea>
      </div>
    </section>
  </main>

  <footer>
    <p>Vos données (coches + notes) sont sauvegardées automatiquement dans la mémoire du navigateur.</p>
  </footer>

  <script>
    const STORAGE_KEY = 'grille-express-v1';

    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const $ = (sel, el=document) => el.querySelector(sel);

    const scoreEl = $('#score');
    const savedAtEl = $('#savedAt');

    function computeScore() {
      const n = $$('.crit').filter(c => c.checked).length;
      scoreEl.textContent = String(n);
    }

    function renderSavedAt(iso){
      if(!iso){ savedAtEl.textContent = '—'; return; }
      const d = new Date(iso);
      savedAtEl.textContent = d.toLocaleString();
    }

    function save() {
      const data = { checks:{}, notes:{}, force: $('#force').value, axe: $('#axe').value, savedAt: new Date().toISOString() };
      $$('.card').forEach(card => {
        const key = card.getAttribute('data-key');
        data.checks[key] = $('#chk-' + key, card)?.checked || false;
        data.notes[key] = $('#note-' + key, card)?.value || '';
      });
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      renderSavedAt(data.savedAt);
    }

    function load() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return;
      try {
        const data = JSON.parse(raw);
        Object.entries(data.checks || {}).forEach(([k,v]) => { const el = $('#chk-' + k); if (el) el.checked = !!v; });
        Object.entries(data.notes || {}).forEach(([k,v]) => { const el = $('#note-' + k); if (el) el.value = v; });
        if (data.force !== undefined) $('#force').value = data.force;
        if (data.axe !== undefined) $('#axe').value = data.axe;
        renderSavedAt(data.savedAt);
        computeScore();
      } catch(e) { console.warn('Load error', e); }
    }

    function resetAll(){
      // Réinitialisation immédiate (sans boîte de confirmation)
      $$('.crit').forEach(c=> c.checked = false);
      $$('textarea').forEach(t=> t.value = '');
      computeScore();
      // Sauvegarde d'un état vierge
      save();
    }

    // Events
    $$('.crit').forEach(cb => cb.addEventListener('change', ()=>{ computeScore(); save(); }));
    $$('textarea').forEach(t => t.addEventListener('input', ()=> save()));
    const resetBtn = $('#btn-reset');
    if (resetBtn) resetBtn.addEventListener('click', resetAll);

    // Init
    computeScore();
    load();
  </script>
</body>
</html>
